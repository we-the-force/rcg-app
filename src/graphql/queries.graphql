query AppQuery {
  categorias {
    nombre
  }
  tvChannels: canalEstacions(where: { Radio_TV: true }) {
    ...StationData
  }
  radioStations: canalEstacions(where: { Radio_TV: false }) {
    ...StationData
  }
  rightPanel: articulos(sort: "fecha:desc,visitas:desc", limit: 5) {
    ...ArticulosData
  }
}

query HomePage {
  banner: banners(sort: "posicion:desc", limit: 10) {
    articulo {
      ...ArticulosData
    }
  }
  categorias {
    nombre
    articulos(sort: "fecha:desc", limit: 16) {
      ...ArticulosData
    }
  }
  relevante: articulos(
    sort: "fecha:desc"
    where: { relevante: true }
    limit: 8
  ) {
    ...ArticulosData
  }
}

query AutorPage($url: String) {
  autor: autors(where: { url: $url }) {
    id
    nombre
    img {
      url
    }
    articulos(limit: 20) {
      ...ArticulosData
    }
    twitter_link
    facebook_link
    instagram_link
    url
  }

  autorArticulos: articulosConnection(where: { autor: { url: $url } }) {
    groupBy {
      autor {
        key
        connection {
          aggregate {
            count
          }
        }
      }
    }
  }

  autores: autors(limit: 3, where: { url_ne: $url }) {
    id
    nombre
    img {
      url
    }
    twitter_link
    facebook_link
    instagram_link
    url
  }

  autoresArticulos: articulosConnection {
    groupBy {
      autor {
        key
        connection {
          aggregate {
            count
          }
        }
      }
    }
  }
}

query AutoresPage {
  autores: autors {
    id
    nombre
    img {
      url
    }
    twitter_link
    facebook_link
    instagram_link
    url
  }
  autorArticulos: articulosConnection {
    groupBy {
      autor {
        key
        connection {
          aggregate {
            count
          }
        }
      }
    }
  }
}

query BusquedaDesc($values: [String], $inicio: Int, $limite: Int) {
  articulos(
    where: { description_contains: $values },
    start: $inicio,
    limit: $limite
  ) {
    ...ArticulosData
  }
}

query BusquedaTitulo($values: [String], $inicio: Int, $limite: Int) {
  articulos(
    where: { Titulo_contains: $values },
    start: $inicio,
    limit: $limite
  ) {
    ...ArticulosData
  }
}
query BusquedaTag($values: [String], $inicio: Int, $limite: Int) {
  articulos(
    where: { tags: { nombre_contains: $values } },
    start: $inicio,
    limit: $limite
  ) {
    ...ArticulosData
  }
}

query AboutUsPage {
  nosotrosInfo: nosotro {
    descripcion
    info_mid
    info_bottom
  }
}

query AvisoPrivacidadPage {
  avisoPrivacidad: avisoDePrivacidad {
    descripcion
  }
}

query DerechoReplicaPage {
  content: derechoDeReplica {
    nombre
    direccion
    telefono
    correo
  }
}

query FaqPage {
  faq: preguntasFrecuente {
    preguntas {
      pregunta
      respuesta
    }
  }
}

query BorraEsteMasAdelante {
  articulosLocal: articulos(where: { categoria: { id: 1 } }, limit: 5) {
    ...ArticulosData
  }
  articulosEstatal: articulos(where: { categoria: { id: 2 } }, limit: 5) {
    ...ArticulosData
  }
  articulosNacional: articulos(where: { categoria: { id: 3 } }, limit: 5) {
    ...ArticulosData
  }
  articulosInternacional: articulos(where: { categoria: { id: 4 } }, limit: 5) {
    ...ArticulosData
  }
  articulosDeporte: articulos(where: { categoria: { id: 5 } }, limit: 5) {
    ...ArticulosData
  }
  articulosEspectaculo: articulos(where: { categoria: { id: 6 } }, limit: 5) {
    ...ArticulosData
  }
  articulosDestacados: articulos(where: { categoria: { id: 7 } }, limit: 5) {
    ...ArticulosData
  }
  articulosFundacion: articulos(where: { categoria: { id: 8 } }, limit: 5) {
    ...ArticulosData
  }
  articulosSaludCultura: articulos(where: { categoria: { id: 9 } }, limit: 5) {
    ...ArticulosData
  }
}

query ArticuloPage($url: String) {
  articulos(where: { url: $url }) {
    ...ArticulosData
  }
  radio_stations: canalEstacions(where: { Radio_TV: false }) {
    ...StationData
  }
  tv_channels: canalEstacions(where: { Radio_TV: true }) {
    ...StationData
  }
  articulosDestacadosRaros: articulos(sort: "fecha:desc", limit: 5) {
    ...ArticulosData
  }
}

query CategoriaPage($categoria: String) {
  articulos(where: { categoria: { nombre: $categoria } }) {
    ...ArticulosData
  }
  categorias {
    nombre
  }
  radio_stations: canalEstacions(where: { Radio_TV: false }) {
    ...StationData
  }
  tv_channels: canalEstacions(where: { Radio_TV: true }) {
    ...StationData
  }
  articulosDestacadosRaros: articulos(sort: "fecha:desc", limit: 5) {
    ...ArticulosData
  }
}

query SearchArticulosByTag($tags: [String]) {
  articulos(where: { tags: { nombre_in: $tags } }) {
    ...ArticulosData
  }
}

query SchedulePage($station: String, $date: String) {
  categorias {
    nombre
  }
  radio_stations: canalEstacions(where: { Radio_TV: false }) {
    ...StationData
  }
  tv_channels: canalEstacions(where: { Radio_TV: true }) {
    ...StationData
  }
  programacionSemanas(
    where: { canal_estacion: { url: $station }, fecha_inicio_gte: $date }
    sort: "fecha_inicio:asc"
  ) {
    ...ScheduleData
    # id
    # programacion {
    #   lunes{programa{Nombre}}
    # }
  }
  articulosDestacadosRaros: articulos(sort: "fecha:desc", limit: 5) {
    ...ArticulosData
  }
}

query NotFoundPage {
  radio_stations: canalEstacions(where: { Radio_TV: false }) {
    ...StationData
  }
  tv_channels: canalEstacions(where: { Radio_TV: true }) {
    ...StationData
  }
  articulosDestacadosRaros: articulos(sort: "fecha:desc", limit: 5) {
    ...ArticulosData
  }
}

query EspectacularPage {
  radio_stations: canalEstacions(where: { Radio_TV: false }) {
    ...StationData
  }
  tv_channels: canalEstacions(where: { Radio_TV: true }) {
    ...StationData
  }
  espectacularInfo {
    quienes_somos
    porque_nosotros
    nosotros
  }
  clientes: espectacularClientes {
    nombre
    logo {
      url
    }
  }
}

query CatalogoPage {
  radio_stations: canalEstacions(where: { Radio_TV: false }) {
    ...StationData
  }
  tv_channels: canalEstacions(where: { Radio_TV: true }) {
    ...StationData
  }
  norte: espectaculars(where: { zona: "norte" }) {
    ...EspectacularData
  }
  sur: espectaculars(where: { zona: "sur" }) {
    ...EspectacularData
  }
  oriente: espectaculars(where: { zona: "oriente" }) {
    ...EspectacularData
  }
  poniente: espectaculars(where: { zona: "poniente" }) {
    ...EspectacularData
  }
  centro: espectaculars(where: { zona: "centro" }) {
    ...EspectacularData
  }
}

mutation UpdateArticulo($id: ID!, $visitas: Int) {
  updateArticulo(input: { where: { id: $id }, data: { visitas: $visitas } }) {
    articulo {
      id
      visitas
    }
  }
}

fragment EspectacularData on Espectacular {
  id_espectacular
  cara1 {
    url
  }
  cara2 {
    url
  }
  lugar
  zona
}

fragment StationData on CanalEstacion {
  nombre
  url
  source_url
  logo {
    url
  }
  descripcion
  Radio_TV
}

fragment ArticulosData on Articulo {
  id
  url
  Titulo
  autor {
    nombre
  }
  fecha
  cover {
    url
  }
  description
  visitas
  tags {
    nombre
  }
  categoria {
    nombre
    id
  }
  comentarios {
    valor
  }
}

fragment ScheduleData on ProgramacionSemana {
  id
  canal_estacion {
    nombre
  }
  programacion {
    lunes {
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    martes {
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    miercoles {
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    jueves {
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    viernes {
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    sabado {
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    domingo {
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
  }
}
