query CategoriaPage($categoria: String){
  articulos(where: { categoria: { nombre: $categoria }}){
    ...ArticulosData
  },
  categorias {
    nombre
  },
  radio_stations: canalEstacions(where: {Radio_TV: false}){
    ...StationData
  },
  tv_channels: canalEstacions(where: {Radio_TV: true}){
    ...StationData
  },
  articulosDestacadosRaros: articulos(sort: "fecha:desc",  limit: 5)
  {
    ...ArticulosData
  }
}

query ArticuloPage($url: String){
  articulos(where: {url: $url}){
    ...ArticulosData
  },
  categorias {
    nombre
  },
  radio_stations: canalEstacions(where: {Radio_TV: false}){
    ...StationData
  },
  tv_channels: canalEstacions(where: {Radio_TV: true}){
    ...StationData
  },
  articulosDestacadosRaros: articulos(sort: "fecha:desc",  limit: 5)
  {
    ...ArticulosData
  }
}

query TopArticulos{
  articulos(where: {relevante: true}){
    ...ArticulosData
  }
}

query HomePage{
  categorias{
    nombre
  },
  radio_stations: canalEstacions(where: {Radio_TV: false}){
    ...StationData
  },
  tv_channels: canalEstacions(where: {Radio_TV: true}){
    ...StationData
  },
  articulosBanner: banners(sort: "posicion:desc", limit: 10){
    posicion
    articulo{ ...ArticulosData}
  },
  articulosTop: articulos(sort: "fecha:desc", where: {relevante: true}, limit: 9){
    ...ArticulosData
  },
  articulosLocal: articulos(where: {categoria: {id:1}} limit: 5){
    ...ArticulosData
  },
  articulosEstatal: articulos(where: {categoria: {id:2}} limit: 5){
    ...ArticulosData
  },
  articulosNacional: articulos(where: {categoria: {id:3}} limit: 5){
    ...ArticulosData
  },
  articulosInternacional: articulos(where: {categoria: {id:4}} limit: 5){
    ...ArticulosData
  },
  articulosDeporte: articulos(where: {categoria: {id:5}} limit: 5){
    ...ArticulosData
  },
  articulosEspectaculo: articulos(where: {categoria: {id:6}} limit: 5){
    ...ArticulosData
  },
  articulosDestacados: articulos(where: {categoria: {id:7}} limit: 5){
    ...ArticulosData
  },
  articulosFundacion: articulos(where: {categoria: {id:8}} limit: 5){
    ...ArticulosData
  },
  articulosSaludCultura: articulos(where: {categoria: {id:9}} limit: 5){
    ...ArticulosData
  },
  articulosDestacadosRaros: articulos(sort: "fecha:desc",  limit: 5)
  {
    ...ArticulosData
  }
}

query BusquedaPage{
  categorias {
    nombre
  },
  radio_stations: canalEstacions(where: {Radio_TV: false}){
    ...StationData
  },
  tv_channels: canalEstacions(where: {Radio_TV: true}){
    ...StationData
  },
  articulosDestacadosRaros: articulos(sort: "fecha:desc",  limit: 5)
  {
    ...ArticulosData
  }
}

query CategoriasNavbar {
  categorias {
    nombre
  }
}

query SearchArticulosByTag($tags: [String]) {
  articulos(where: {tags: {nombre_in: $tags}}) {
    ...ArticulosData
  }
}

query SchedulePage($station: String, $date: String){
  categorias{
    nombre
  },
  radio_stations: canalEstacions(where: {Radio_TV: false}){
    ...StationData
  },
  tv_channels: canalEstacions(where: {Radio_TV: true}){
    ...StationData
  },
  programacionSemanas(where: {canal_estacion: { url: $station } fecha_inicio_gte: $date} sort: "fecha_inicio:asc"){
    ...ScheduleData
    # id
    # programacion {
    #   lunes{programa{Nombre}}
    # }
  },
  articulosDestacadosRaros: articulos(sort: "fecha:desc",  limit: 5)
  {
    ...ArticulosData
  }
}

mutation UpdateArticulo($id: ID!, $visitas: Int) {
  updateArticulo(
    input: {
      where: {id: $id}
      data: {visitas: $visitas}
    }
  )
  {
    articulo {
      id
      visitas
    }
  }
}

fragment StationData on CanalEstacion {
  nombre
  url
  source_url
  logo {url}
  descripcion
  Radio_TV
}

fragment ArticulosData on Articulo {
  id 
  url
  Titulo 
  autor {
    nombre
  } 
  fecha 
  cover {
    url
  } 
  description 
  visitas 
  tags {
    nombre
  } 
  categoria {
    nombre 
    id
  } 
  comentarios { 
    valor
  }
}

fragment ScheduleData on ProgramacionSemana{
  id
  canal_estacion { nombre }
  programacion {
    lunes{
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    martes{
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    miercoles{
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    jueves{
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    viernes{
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    sabado{
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
    domingo{
      hora_inicio
      hora_final
      programa {
        Nombre
        Descripcion
      }
    }
  }
}
